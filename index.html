<!DOCTYPE html>
<html>
  <head>
    <title>Improving Open Source Security with Reproducible Builds</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="rb-style/assets/styles/main.css">
    <link rel="stylesheet" href="assets/customizations.css">
    <link rel="shortcut icon" type="image/png" href="rb-style/assets/images/favicon.png"/>
    <link href="rb-style/assets/fonts/overpass.css" rel="stylesheet">
    <link href="rb-style/assets/fonts/overpass-mono.css" rel="stylesheet">
    <link rel="stylesheet" href="rb-style/assets/static/open-iconic-bootstrap.css" />
    <link rel="stylesheet" href="rb-style/assets/static/bootstrap.min.css">
    <style>
      .remark-code, .remark-inline-code { font-family: 'Overpass Mono'; }
    </style>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  </head>
  <body>
    <textarea id="source">
class: center, middle

Improving

# Open Source Security

with

![Reproducible Builds](assets/ReproducibleBuilds_ICONS_4.svg)

---

layout: true

.navbar.navbar-light.rp-navbar__top[![Reproducible Builds](rb-style/assets/images/logo-text-white.png) ![Hacker Hotel](assets/hackerhotel_white.png)]

---

# Agenda

1. Attacking OSS distribution
2. Defending: Reproducible Builds
3. Other advantages
4. In practice
5. Problems & Tools
6. Arch and Debian

---

# 1. Attacking OSS distribution

---

"Reflections on Trusting Trust", Ken Thompson, 1984

![Figure 7](assets/trusting-trust.gif)

"Such blatant code would not go undetected for long. Even the most casual perusal of the source of the C compiler would raise suspicions"

???

Not a new problem: envisioned in 1984 by inventor of Unix

---

![Homebrew hack](assets/homebrew.png)

![nodejs hack](assets/nodejs.png)

???

Not a theoretical problem:

* august 2018: someone gained access to credentials of Homebrew dev, 




---

# 2. Defending: Reproducible Builds

---

# 3. Other advantages

* Detect security issues (private key generation on build).
* Less rebuilds due to caching results since they are the same.
* Bugs found in packages when building in different environments.
* Builds which fail X% of the time.

---

# 4. In practice

---

# 5. Problems & Tools

---

# Tools

* diffoscope
* disorderfs
* reprotest
* strip-nondeterminism

???

* diffoscope - file diff++
* disorderfs - a FUSE fs which introduces non-determinism
* reprotest- build packages twice in different environments
* strip-nondeterminism - build system tool to strip some sorts of non determinism
used by Debian

---

# diffoscope

Also known as diff on steroids


```bash
$ diffoscope awesome-4.2-1-x86_64.pkg.tar.xz /tmp/awesome-4.2-1-x86_64.pkg.tar.xz
│ │      <h3>See also:</h3>
│ │      <ul>
│ │ -         <li><a href="../classes/tag.html#beautiful.master_width_factor">master_width_factor</a></li>
│ │ -         <li><a href="../classes/tag.html#tag.master_fill_policy">master_fill_policy</a></li>
│ │ +         <li><a href="../classes/tag.html#tag.master_width_factor">master_width_factor</a></li>
│ │ +         <li><a href="../classes/tag.html#beautiful.master_fill_policy">master_fill_policy</a></li>
│ │      </ul>
```

https://try.diffoscope.org

???

Diffs two files with support for a lot of formats which are automatically 'unpacked' in the most
convenient format.

---

# reprotest

Builds binaries twice with different variations.

https://packages.debian.org/sid/reprotest

???

Variations such as time, buildpath, disorderfs.

---

# 6. Arch and Debian

    </textarea>
    <script src="js/remark-0.14.1.min.js">
    </script>
    <script>
      var slideshow = remark.create();
    </script>
  </body>
</html>
